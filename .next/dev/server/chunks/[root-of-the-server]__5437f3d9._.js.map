{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/OneDrive/Desktop/v0-ai-educational-prototype/lib/openai.ts"],"sourcesContent":["import OpenAI from \"openai\"\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n})\r\n\r\nexport async function chatWithAI(message: string): Promise<string> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            \"Tu es un assistant IA éducatif pour une plateforme d'apprentissage. Tu expliques des concepts d'IA de manière simple et engageante pour les jeunes apprenants. Réponds en français.\",\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: message,\r\n        },\r\n      ],\r\n      temperature: 0.7,\r\n      max_tokens: 500,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Je n'ai pas pu générer une réponse.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI chatbot:\", error)\r\n    throw new Error(\"Impossible de communiquer avec l'IA\")\r\n  }\r\n}\r\n\r\nexport async function generateContent(prompt: string, contentType: \"text\" | \"idea\"): Promise<string> {\r\n  try {\r\n    const systemPrompt =\r\n      contentType === \"text\"\r\n        ? \"Tu es un écrivain créatif. Génère un texte créatif intéressant et engageant basé sur le prompt de l'utilisateur. Réponds en français.\"\r\n        : \"Tu es un innovateur. Génère des idées de projets créatives et réalisables basées sur le prompt de l'utilisateur. Réponds en français.\"\r\n\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content: systemPrompt,\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: prompt,\r\n        },\r\n      ],\r\n      temperature: 0.9,\r\n      max_tokens: 800,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Impossible de générer du contenu.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI generator:\", error)\r\n    throw new Error(\"Impossible de générer du contenu\")\r\n  }\r\n}\r\n\r\nexport async function classifyData(description: string): Promise<{ category: string; confidence: number }> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            'Tu es un expert en classification de données. Analyse le texte fourni et classe-le dans une catégorie appropriée. Réponds au format JSON: {\"category\": \"nom_categorie\", \"confidence\": 0.95, \"explanation\": \"explication courte\"}',\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: description,\r\n        },\r\n      ],\r\n      temperature: 0.3,\r\n      max_tokens: 200,\r\n    })\r\n\r\n    const content = response.choices[0]?.message?.content || \"{}\"\r\n    return JSON.parse(content)\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI classification:\", error)\r\n    throw new Error(\"Impossible de classifier les données\")\r\n  }\r\n}\r\n\r\nexport async function analyzeImage(base64Image: string, imageType: \"jpeg\" | \"png\" | \"gif\" | \"webp\"): Promise<string> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            \"Tu es un expert en vision par ordinateur. Analyse l'image fournie et décris en détail ce que tu vois. Explique comment une IA pourrait interpréter les éléments clés. Réponds en français.\",\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: [\r\n            {\r\n              type: \"image_url\",\r\n              image_url: {\r\n                url: `data:image/${imageType};base64,${base64Image}`,\r\n              },\r\n            },\r\n            {\r\n              type: \"text\",\r\n              text: \"Analyse cette image et explique ce que tu vois. Comment une IA pourrait-elle interpréter cela?\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      temperature: 0.7,\r\n      max_tokens: 600,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Impossible d'analyser l'image.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI vision:\", error)\r\n    throw new Error(\"Impossible d'analyser l'image\")\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;;AAEA,MAAM,SAAS,IAAI,mLAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,eAAe,WAAW,OAAe;IAC9C,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,gBAAgB,MAAc,EAAE,WAA4B;IAChF,IAAI;QACF,MAAM,eACJ,gBAAgB,SACZ,0IACA;QAEN,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SAAS;gBACX;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,aAAa,WAAmB;IACpD,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,MAAM,UAAU,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;QACzD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,aAAa,WAAmB,EAAE,SAA0C;IAChG,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;wBACP;4BACE,MAAM;4BACN,WAAW;gCACT,KAAK,CAAC,WAAW,EAAE,UAAU,QAAQ,EAAE,aAAa;4BACtD;wBACF;wBACA;4BACE,MAAM;4BACN,MAAM;wBACR;qBACD;gBACH;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/OneDrive/Desktop/v0-ai-educational-prototype/app/api/chatbot/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\nimport { chatWithAI } from \"@/lib/openai\"\r\n\r\n// Simulated chatbot response\r\n// In production, you would connect this to a real LLM API like OpenAI, Anthropic, etc.\r\n// function generateChatbotResponse(message: string): string {\r\n//   const responses: { [key: string]: string[] } = {\r\n//     hello: [\"Salut! Comment ça va?\", \"Bonjour! Je suis heureux de te parler.\"],\r\n//     ai: [\r\n//       \"L'IA est fascinante! Elle peut apprendre des patterns dans les données.\",\r\n//       \"L'intelligence artificielle est un domaine qui évolue très rapidement.\",\r\n//     ],\r\n//     help: [\r\n//       \"Je peux t'aider avec tes questions sur l'IA!\",\r\n//       \"N'hésite pas à poser des questions, je ferai de mon mieux pour répondre.\",\r\n//     ],\r\n//     default: [\r\n//       \"C'est une bonne question! Je vais y réfléchir.\",\r\n//       \"Intéressant! Peux-tu m'en dire plus?\",\r\n//       \"Je comprends. Dis-moi ce que tu penses.\",\r\n//     ],\r\n//   }\r\n\r\n//   const lowerMessage = message.toLowerCase()\r\n//   let selectedResponses = responses.default\r\n\r\n//   if (lowerMessage.includes(\"salut\") || lowerMessage.includes(\"bonjour\")) {\r\n//     selectedResponses = responses.hello\r\n//   } else if (lowerMessage.includes(\"ia\") || lowerMessage.includes(\"intelligence\")) {\r\n//     selectedResponses = responses.ai\r\n//   } else if (lowerMessage.includes(\"aide\") || lowerMessage.includes(\"help\")) {\r\n//     selectedResponses = responses.help\r\n//   }\r\n\r\n//   return selectedResponses[Math.floor(Math.random() * selectedResponses.length)]\r\n// }\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { message } = await request.json()\r\n\r\n    if (!message || typeof message !== \"string\") {\r\n      return NextResponse.json({ error: \"Message invalide\" }, { status: 400 })\r\n    }\r\n\r\n    const response = await chatWithAI(message)\r\n\r\n    return NextResponse.json({ response })\r\n  } catch (error) {\r\n    console.error(\"Erreur chatbot:\", error)\r\n    return NextResponse.json({ error: error instanceof Error ? error.message : \"Erreur serveur\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAoCO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtC,IAAI,CAAC,WAAW,OAAO,YAAY,UAAU;YAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,MAAM,WAAW,MAAM,IAAA,6HAAU,EAAC;QAElC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAC/G;AACF"}}]
}