{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/OneDrive/Desktop/v0-ai-educational-prototype/lib/openai.ts"],"sourcesContent":["import OpenAI from \"openai\"\r\nexport const openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport async function chatWithAI(message: string): Promise<string> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            \"Tu es un assistant IA éducatif pour une plateforme d'apprentissage. Tu expliques des concepts d'IA de manière simple et engageante pour les jeunes apprenants. Réponds en français.\",\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: message,\r\n        },\r\n      ],\r\n      temperature: 0.7,\r\n      max_tokens: 500,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Je n'ai pas pu générer une réponse.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI chatbot:\", error)\r\n    throw new Error(\"Impossible de communiquer avec l'IA\")\r\n  }\r\n}\r\n\r\nexport async function generateContent(prompt: string, contentType: \"text\" | \"idea\"): Promise<string> {\r\n  try {\r\n    const systemPrompt =\r\n      contentType === \"text\"\r\n        ? \"Tu es un écrivain créatif. Génère un texte créatif intéressant et engageant basé sur le prompt de l'utilisateur. Réponds en français.\"\r\n        : \"Tu es un innovateur. Génère des idées de projets créatives et réalisables basées sur le prompt de l'utilisateur. Réponds en français.\"\r\n\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content: systemPrompt,\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: prompt,\r\n        },\r\n      ],\r\n      temperature: 0.9,\r\n      max_tokens: 800,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Impossible de générer du contenu.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI generator:\", error)\r\n    throw new Error(\"Impossible de générer du contenu\")\r\n  }\r\n}\r\n\r\nexport async function classifyData(description: string): Promise<{ category: string; confidence: number }> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            'Tu es un expert en classification de données. Analyse le texte fourni et classe-le dans une catégorie appropriée. Réponds au format JSON: {\"category\": \"nom_categorie\", \"confidence\": 0.95, \"explanation\": \"explication courte\"}',\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: description,\r\n        },\r\n      ],\r\n      temperature: 0.3,\r\n      max_tokens: 200,\r\n    })\r\n\r\n    const content = response.choices[0]?.message?.content || \"{}\"\r\n    return JSON.parse(content)\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI classification:\", error)\r\n    throw new Error(\"Impossible de classifier les données\")\r\n  }\r\n}\r\n\r\nexport async function analyzeImage(base64Image: string, imageType: \"jpeg\" | \"png\" | \"gif\" | \"webp\"): Promise<string> {\r\n  try {\r\n    const response = await openai.chat.completions.create({\r\n      model: \"gpt-4o-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content:\r\n            \"Tu es un expert en vision par ordinateur. Analyse l'image fournie et décris en détail ce que tu vois. Explique comment une IA pourrait interpréter les éléments clés. Réponds en français.\",\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: [\r\n            {\r\n              type: \"image_url\",\r\n              image_url: {\r\n                url: `data:image/${imageType};base64,${base64Image}`,\r\n              },\r\n            },\r\n            {\r\n              type: \"text\",\r\n              text: \"Analyse cette image et explique ce que tu vois. Comment une IA pourrait-elle interpréter cela?\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      temperature: 0.7,\r\n      max_tokens: 600,\r\n    })\r\n\r\n    return response.choices[0]?.message?.content || \"Impossible d'analyser l'image.\"\r\n  } catch (error) {\r\n    console.error(\"Erreur OpenAI vision:\", error)\r\n    throw new Error(\"Impossible d'analyser l'image\")\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;;AACO,MAAM,SAAS,IAAI,mLAAM,CAAC;IAC/B,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,eAAe,WAAW,OAAe;IAC9C,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,gBAAgB,MAAc,EAAE,WAA4B;IAChF,IAAI;QACF,MAAM,eACJ,gBAAgB,SACZ,0IACA;QAEN,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SAAS;gBACX;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,aAAa,WAAmB;IACpD,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;gBACX;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,MAAM,UAAU,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;QACzD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,aAAa,WAAmB,EAAE,SAA0C;IAChG,IAAI;QACF,MAAM,WAAW,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBACE,MAAM;oBACN,SAAS;wBACP;4BACE,MAAM;4BACN,WAAW;gCACT,KAAK,CAAC,WAAW,EAAE,UAAU,QAAQ,EAAE,aAAa;4BACtD;wBACF;wBACA;4BACE,MAAM;4BACN,MAAM;wBACR;qBACD;gBACH;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,OAAO,SAAS,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahmed/OneDrive/Desktop/v0-ai-educational-prototype/app/api/generator/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\nimport { generateContent } from \"@/lib/openai\"\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { prompt, type } = await request.json()\r\n\r\n    if (!prompt || typeof prompt !== \"string\") {\r\n      return NextResponse.json({ error: \"Prompt invalide\" }, { status: 400 })\r\n    }\r\n\r\n    const content = await generateContent(prompt, type || \"text\")\r\n\r\n    return NextResponse.json({ content })\r\n  } catch (error) {\r\n    console.error(\"Erreur générateur:\", error)\r\n    return NextResponse.json({ error: error instanceof Error ? error.message : \"Erreur serveur\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE3C,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU;YACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,UAAU,MAAM,IAAA,kIAAe,EAAC,QAAQ,QAAQ;QAEtD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAQ;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAC/G;AACF"}}]
}